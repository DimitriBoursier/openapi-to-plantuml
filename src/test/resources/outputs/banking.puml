@startuml

class "ErrorModel" {
  timestamp : timestamp {O}
  status : integer
  error : string {O}
  message : string
  path : string {O}
}

class "GenericLink" {
  href : string
  templated : boolean {O}
}

class "PsuContextLinks" {
}

"PsuContextLinks" --> "1" "GenericLink" : self

"PsuContextLinks" --> "0..1" "GenericLink" : endUserIdentity

"PsuContextLinks" --> "0..1" "GenericLink" : beneficiaries

"PsuContextLinks" --> "0..1" "GenericLink" : first

"PsuContextLinks" --> "0..1" "GenericLink" : last

"PsuContextLinks" --> "0..1" "GenericLink" : next

"PsuContextLinks" --> "0..1" "GenericLink" : prev

class "AccountLinks" {
}

"AccountLinks" --> "0..1" "GenericLink" : balances

"AccountLinks" --> "0..1" "GenericLink" : transactions

class "BalancesLinks" {
}

"BalancesLinks" --> "1" "GenericLink" : self

"BalancesLinks" --> "0..1" "GenericLink" : parent-list

"BalancesLinks" --> "0..1" "GenericLink" : transactions

class "TransactionsLinks" {
}

"TransactionsLinks" --> "1" "GenericLink" : self

"TransactionsLinks" --> "0..1" "GenericLink" : parent-list

"TransactionsLinks" --> "0..1" "GenericLink" : balances

"TransactionsLinks" --> "0..1" "GenericLink" : first

"TransactionsLinks" --> "0..1" "GenericLink" : last

"TransactionsLinks" --> "0..1" "GenericLink" : next

"TransactionsLinks" --> "0..1" "GenericLink" : prev

class "EndUserIdentityLinks" {
}

"EndUserIdentityLinks" --> "1" "GenericLink" : self

"EndUserIdentityLinks" --> "0..1" "GenericLink" : parent-list

class "PaymentRequestLinks" {
}

"PaymentRequestLinks" --> "0..1" "GenericLink" : request

"PaymentRequestLinks" --> "0..1" "GenericLink" : confirmation

class "PaymentCoverageReportLinks" {
}

"PaymentCoverageReportLinks" --> "1" "GenericLink" : self

class "PaymentRequestResourceCreationLinks" {
}

"PaymentRequestResourceCreationLinks" --> "0..1" "GenericLink" : consentApproval

class "AppliedAuthenticationApproach" {
  value : string
}

class "GenericIdentification" {
  identification : string
  schemeName : string
  issuer : string {O}
}

class "AccountIdentification" {
  iban : string {O}
}

"AccountIdentification" --> "0..1" "GenericIdentification" : other

"AccountIdentification" --> "0..1" "CurrencyCode" : currency

class "CurrencyCode" {
  value : string
}

class "AmountType" {
  amount : string
}

"AmountType" --> "1" "CurrencyCode" : currency

class "ClearingSystemMemberIdentification" {
  clearingSystemId : string {O}
  memberId : string {O}
}

class "FinancialInstitutionIdentification" {
  bicFi : string
  name : string {O}
}

"FinancialInstitutionIdentification" --> "0..1" "ClearingSystemMemberIdentification" : clearingSystemMemberId

"FinancialInstitutionIdentification" --> "0..1" "PostalAddress" : postalAddress

class "PostalAddress" {
  country : string
  addressLine : string[]
}

class "PartyIdentification" {
  name : string
}

"PartyIdentification" --> "0..1" "PostalAddress" : postalAddress

"PartyIdentification" --> "0..1" "GenericIdentification" : organisationId

"PartyIdentification" --> "0..1" "GenericIdentification" : privateId

class "ResourceId" {
  value : string
}

class "PaymentIdentification" {
  instructionId : string
  endToEndId : string {O}
}

"PaymentIdentification" --> "0..1" "ResourceId" : resourceId

class "PriorityCode" {
  value : string
}

class "CategoryPurposeCode" {
  value : string
}

class "ServiceLevelCode" {
  value : string
}

class "LocalInstrumentCode" {
  value : string
}

class "PaymentTypeInformation" {
}

"PaymentTypeInformation" --> "0..1" "PriorityCode" : instructionPriority

"PaymentTypeInformation" --> "0..1" "ServiceLevelCode" : serviceLevel

"PaymentTypeInformation" --> "0..1" "LocalInstrumentCode" : localInstrument

"PaymentTypeInformation" --> "0..1" "CategoryPurposeCode" : categoryPurpose

class "PurposeCode" {
  value : string
}

class "ChargeBearerCode" {
  value : string
}

class "UnstructuredRemittanceInformation" {
}

class "PaymentInformationStatusCode" {
  value : string
}

class "TransactionIndividualStatusCode" {
  value : string
}

class "StatusReasonInformation" {
  value : string
}

class "RegulatoryReportingCode" {
  value : string
}

class "RegulatoryReportingCodes" {
}

"RegulatoryReportingCodes" --> "*" "RegulatoryReportingCode"

class "RequestedExecutionDate" {
}

class "EndDate" {
}

class "ExecutionRule" {
  value : string
}

class "FrequencyCode" {
  value : string
}

class "CreditTransferTransaction" {
}

"CreditTransferTransaction" --> "1" "PaymentIdentification" : paymentId

"CreditTransferTransaction" --> "0..1" "Beneficiary" : beneficiary

"CreditTransferTransaction" --> "0..1" "RequestedExecutionDate" : requestedExecutionDate

"CreditTransferTransaction" --> "0..1" "EndDate" : endDate

"CreditTransferTransaction" --> "0..1" "ExecutionRule" : executionRule

"CreditTransferTransaction" --> "0..1" "FrequencyCode" : frequency

"CreditTransferTransaction" --> "1" "AmountType" : instructedAmount

"CreditTransferTransaction" --> "0..1" "PartyIdentification" : ultimateCreditor

"CreditTransferTransaction" --> "0..1" "RegulatoryReportingCodes" : regulatoryReportingCodes

"CreditTransferTransaction" --> "0..1" "UnstructuredRemittanceInformation" : remittanceInformation

"CreditTransferTransaction" --> "0..1" "TransactionIndividualStatusCode" : transactionStatus

"CreditTransferTransaction" --> "0..1" "StatusReasonInformation" : statusReasonInformation

class "SupplementaryData" {
  acceptedAuthenticationApproach : string[] {O}
  scaHint : string {O}
  successfulReportUrl : string {O}
  unsuccessfulReportUrl : string {O}
}

"SupplementaryData" --> "0..1" "AppliedAuthenticationApproach" : appliedAuthenticationApproach

class "BalanceStatus" {
  value : string
}

class "TransactionStatus" {
  value : string
}

class "CreditDebitIndicator" {
  value : string
}

class "Transaction" {
  entryReference : string {O}
  bookingDate : date
  valueDate : date {O}
  transactionDate : date {O}
}

"Transaction" --> "0..1" "ResourceId" : resourceId

"Transaction" --> "1" "AmountType" : transactionAmount

"Transaction" --> "1" "CreditDebitIndicator" : creditDebitIndicator

"Transaction" --> "1" "TransactionStatus" : status

"Transaction" --> "0..1" "UnstructuredRemittanceInformation" : remittanceInformation

class "AccountResource" {
  bicFi : string {O}
  name : string
  details : string {O}
  linkedAccount : string {O}
  usage : string {O}
  cashAccountType : string
  product : string {O}
  psuStatus : string {O}
}

"AccountResource" --> "0..1" "ResourceId" : resourceId

"AccountResource" --> "0..1" "AccountIdentification" : accountId

"AccountResource" --> "*" "BalanceResource" : balances

"AccountResource" --> "1" "AccountLinks" : _links

class "BalanceResource" {
  name : string
  lastChangeDateTime : timestamp {O}
  referenceDate : date {O}
  lastCommittedTransaction : string {O}
}

"BalanceResource" --> "1" "AmountType" : balanceAmount

"BalanceResource" --> "1" "BalanceStatus" : balanceType

class "PaymentInformationId" {
  value : string
}

class "CreationDateTime" {
}

class "FundsAvailabilityInformation" {
}

class "BookingInformation" {
}

class "PaymentRequestResource" {
  numberOfTransactions : integer
  requestedExecutionDate : timestamp {O}
}

"PaymentRequestResource" --> "0..1" "ResourceId" : resourceId

"PaymentRequestResource" --> "1" "PaymentInformationId" : paymentInformationId

"PaymentRequestResource" --> "1" "CreationDateTime" : creationDateTime

"PaymentRequestResource" --> "1" "PartyIdentification" : initiatingParty

"PaymentRequestResource" --> "1" "PaymentTypeInformation" : paymentTypeInformation

"PaymentRequestResource" --> "0..1" "PartyIdentification" : debtor

"PaymentRequestResource" --> "0..1" "AccountIdentification" : debtorAccount

"PaymentRequestResource" --> "0..1" "FinancialInstitutionIdentification" : debtorAgent

"PaymentRequestResource" --> "0..1" "PartyIdentification" : ultimateCreditor

"PaymentRequestResource" --> "0..1" "PurposeCode" : purpose

"PaymentRequestResource" --> "0..1" "ChargeBearerCode" : chargeBearer

"PaymentRequestResource" --> "0..1" "PaymentInformationStatusCode" : paymentInformationStatus

"PaymentRequestResource" --> "0..1" "StatusReasonInformation" : statusReasonInformation

"PaymentRequestResource" --> "0..1" "FundsAvailabilityInformation" : fundsAvailability

"PaymentRequestResource" --> "0..1" "BookingInformation" : booking

"PaymentRequestResource" --> "*" "CreditTransferTransaction" : creditTransferTransaction

"PaymentRequestResource" --> "1" "SupplementaryData" : supplementaryData

class "PaymentCoverageRequestResource" {
  paymentCoverageRequestId : string
  payee : string {O}
}

"PaymentCoverageRequestResource" --> "1" "AmountType" : instructedAmount

"PaymentCoverageRequestResource" --> "1" "AccountIdentification" : accountId

class "HalAccounts" {
}

"HalAccounts" --> "*" "AccountResource" : accounts

"HalAccounts" --> "1" "PsuContextLinks" : _links

class "HalBalances" {
}

"HalBalances" --> "*" "BalanceResource" : balances

"HalBalances" --> "1" "BalancesLinks" : _links

class "HalTransactions" {
}

"HalTransactions" --> "*" "Transaction" : transactions

"HalTransactions" --> "1" "TransactionsLinks" : _links

class "GetPaymentRequest" {
}

"GetPaymentRequest" --> "1" "PaymentRequestResource" : paymentRequest

"GetPaymentRequest" --> "1" "PaymentRequestLinks" : _links

class "HalPaymentRequest" {
}

"HalPaymentRequest" --> "1" "PaymentRequestResource" : paymentRequest

"HalPaymentRequest" --> "1" "PaymentRequestLinks" : _links

class "HalPaymentRequestCreation" {
}

"HalPaymentRequestCreation" --> "0..1" "AppliedAuthenticationApproach" : appliedAuthenticationApproach

"HalPaymentRequestCreation" --> "0..1" "PaymentRequestResourceCreationLinks" : _links

class "HalPaymentCoverageReport" {
  result : boolean
}

"HalPaymentCoverageReport" --> "1" "PaymentCoverageRequestResource" : request

"HalPaymentCoverageReport" --> "1" "PaymentCoverageReportLinks" : _links

class "Beneficiary" {
  id : string {O}
  isTrusted : boolean {O}
}

"Beneficiary" --> "0..1" "FinancialInstitutionIdentification" : creditorAgent

"Beneficiary" --> "1" "PartyIdentification" : creditor

"Beneficiary" --> "0..1" "AccountIdentification" : creditorAccount

class "HalEndUserIdentity" {
  connectedPsu : string
}

"HalEndUserIdentity" --> "1" "EndUserIdentityLinks" : _links

class "HalBeneficiaries" {
}

"HalBeneficiaries" --> "*" "Beneficiary" : beneficiaries

class "AccessibleAccounts" {
}

"AccessibleAccounts" --> "*" "AccountIdentification"

class "Access" {
  trustedBeneficiaries : boolean
  psuIdentity : boolean
}

"Access" --> "1" "AccessibleAccounts" : balances

"Access" --> "1" "AccessibleAccounts" : transactions

class "ConfirmationResource" {
  psuAuthenticationFactor : string {O}
}

"ConfirmationResource" --> "0..1" "Nonce" : nonce

class "Nonce" {
  value : string
}
hide <<Method>> circle

class "GET /openbanking-test/v1/accounts" <<Method>> {
  null : PsuIpAddressHeader {O}
  null : PsuIpPortHeader {O}
  null : PsuHttpMethodHeader {O}
  null : PsuDateHeader {O}
  null : PsuGeoLocation {O}
  null : PsuUserAgentHeader {O}
  null : PsuRefererHeader {O}
  null : PsuAcceptHeader {O}
  null : PsuAcceptCharsetHeader {O}
  null : PsuAcceptEncodingHeader {O}
  null : PsuAcceptLanguageHeader {O}
  null : PsuDeviceId {O}
  null : DigestHeader {O}
  null : SignatureHeader {O}
  null : Correlation {O}
  null : QueryParameterPage {O}
}

"GET /openbanking-test/v1/accounts" ..> "HalAccounts": 200

class "GET /openbanking-test/v1/accounts/{accountResourceId}/balances" <<Method>> {
  null : AccountResourceIdentification {O}
  null : PsuIpAddressHeader {O}
  null : PsuIpPortHeader {O}
  null : PsuHttpMethodHeader {O}
  null : PsuDateHeader {O}
  null : PsuGeoLocation {O}
  null : PsuUserAgentHeader {O}
  null : PsuRefererHeader {O}
  null : PsuAcceptHeader {O}
  null : PsuAcceptCharsetHeader {O}
  null : PsuAcceptEncodingHeader {O}
  null : PsuAcceptLanguageHeader {O}
  null : PsuDeviceId {O}
  null : DigestHeader {O}
  null : SignatureHeader {O}
  null : Correlation {O}
}

"GET /openbanking-test/v1/accounts/{accountResourceId}/balances" ..> "HalBalances": 200

class "GET /openbanking-test/v1/accounts/{accountResourceId}/transactions" <<Method>> {
  null : AccountResourceIdentification {O}
  null : FromImputationDate {O}
  null : ToImputationDate {O}
  null : PsuIpAddressHeader {O}
  null : PsuIpPortHeader {O}
  null : PsuHttpMethodHeader {O}
  null : PsuDateHeader {O}
  null : PsuGeoLocation {O}
  null : PsuUserAgentHeader {O}
  null : PsuRefererHeader {O}
  null : PsuAcceptHeader {O}
  null : PsuAcceptCharsetHeader {O}
  null : PsuAcceptEncodingHeader {O}
  null : PsuAcceptLanguageHeader {O}
  null : PsuDeviceId {O}
  null : DigestHeader {O}
  null : SignatureHeader {O}
  null : Correlation {O}
  null : QueryParameterPage {O}
}

"GET /openbanking-test/v1/accounts/{accountResourceId}/transactions" ..> "HalTransactions": 200

class "POST /openbanking-test/v1/accounts/funds-confirmations" <<Method>> {
  null : PsuIpAddressHeader {O}
  null : PsuIpPortHeader {O}
  null : PsuHttpMethodHeader {O}
  null : PsuDateHeader {O}
  null : PsuGeoLocation {O}
  null : PsuUserAgentHeader {O}
  null : PsuRefererHeader {O}
  null : PsuAcceptHeader {O}
  null : PsuAcceptCharsetHeader {O}
  null : PsuAcceptEncodingHeader {O}
  null : PsuAcceptLanguageHeader {O}
  null : PsuDeviceId {O}
  null : DigestHeader {O}
  null : SignatureHeader {O}
  null : Correlation {O}
}

"POST /openbanking-test/v1/accounts/funds-confirmations" ..> "HalPaymentCoverageReport": 200

class "PUT /openbanking-test/v1/consents" <<Method>> {
  null : PsuIpAddressHeader {O}
  null : PsuIpPortHeader {O}
  null : PsuHttpMethodHeader {O}
  null : PsuDateHeader {O}
  null : PsuGeoLocation {O}
  null : PsuUserAgentHeader {O}
  null : PsuRefererHeader {O}
  null : PsuAcceptHeader {O}
  null : PsuAcceptCharsetHeader {O}
  null : PsuAcceptEncodingHeader {O}
  null : PsuAcceptLanguageHeader {O}
  null : PsuDeviceId {O}
  null : DigestHeader {O}
  null : SignatureHeader {O}
  null : Correlation {O}
}

class "GET /openbanking-test/v1/end_user_identity" <<Method>> {
  null : PsuIpAddressHeader {O}
  null : PsuIpPortHeader {O}
  null : PsuHttpMethodHeader {O}
  null : PsuDateHeader {O}
  null : PsuGeoLocation {O}
  null : PsuUserAgentHeader {O}
  null : PsuRefererHeader {O}
  null : PsuAcceptHeader {O}
  null : PsuAcceptCharsetHeader {O}
  null : PsuAcceptEncodingHeader {O}
  null : PsuAcceptLanguageHeader {O}
  null : PsuDeviceId {O}
  null : DigestHeader {O}
  null : SignatureHeader {O}
  null : Correlation {O}
}

"GET /openbanking-test/v1/end_user_identity" ..> "HalEndUserIdentity": 200

class "GET /openbanking-test/v1/trusted-beneficiaries" <<Method>> {
  null : PsuIpAddressHeader {O}
  null : PsuIpPortHeader {O}
  null : PsuHttpMethodHeader {O}
  null : PsuDateHeader {O}
  null : PsuGeoLocation {O}
  null : PsuUserAgentHeader {O}
  null : PsuRefererHeader {O}
  null : PsuAcceptHeader {O}
  null : PsuAcceptCharsetHeader {O}
  null : PsuAcceptEncodingHeader {O}
  null : PsuAcceptLanguageHeader {O}
  null : PsuDeviceId {O}
  null : DigestHeader {O}
  null : SignatureHeader {O}
  null : Correlation {O}
}

"GET /openbanking-test/v1/trusted-beneficiaries" ..> "HalBeneficiaries": 200

class "POST /openbanking-test/v1/payment-requests" <<Method>> {
  null : PsuIpAddressHeader {O}
  null : PsuIpPortHeader {O}
  null : PsuHttpMethodHeader {O}
  null : PsuDateHeader {O}
  null : PsuGeoLocation {O}
  null : PsuUserAgentHeader {O}
  null : PsuRefererHeader {O}
  null : PsuAcceptHeader {O}
  null : PsuAcceptCharsetHeader {O}
  null : PsuAcceptEncodingHeader {O}
  null : PsuAcceptLanguageHeader {O}
  null : PsuDeviceId {O}
  null : DigestHeader {O}
  null : SignatureHeader {O}
  null : Correlation {O}
}

"POST /openbanking-test/v1/payment-requests" ..> "HalPaymentRequestCreation": 201

class "GET /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" <<Method>> {
  null : PaymentRequestResourceIdentification {O}
  null : PsuIpAddressHeader {O}
  null : PsuIpPortHeader {O}
  null : PsuHttpMethodHeader {O}
  null : PsuDateHeader {O}
  null : PsuGeoLocation {O}
  null : PsuUserAgentHeader {O}
  null : PsuRefererHeader {O}
  null : PsuAcceptHeader {O}
  null : PsuAcceptCharsetHeader {O}
  null : PsuAcceptEncodingHeader {O}
  null : PsuAcceptLanguageHeader {O}
  null : PsuDeviceId {O}
  null : DigestHeader {O}
  null : SignatureHeader {O}
  null : Correlation {O}
}

"GET /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "GetPaymentRequest": 200

class "PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" <<Method>> {
  paymentRequestResourceId : string
  PSU-IP-Address : string {O}
  PSU-IP-Port : string {O}
  PSU-HTTP-Method : string {O}
  PSU-Date : string {O}
  PSU-GEO-Location : string {O}
  PSU-User-Agent : string {O}
  PSU-Referer : string {O}
  PSU-Accept : string {O}
  PSU-Accept-Charset : string {O}
  PSU-Accept-Encoding : string {O}
  PSU-Accept-Language : string {O}
  PSU-Device-ID : string {O}
  Digest : string {O}
  Signature : string {O}
  X-Request-ID : string {O}
}

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "HalPaymentRequestCreation": 200

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "ErrorModel": 400

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "ErrorModel": 401

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "ErrorModel": 403

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "ErrorModel": 404

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "ErrorModel": 405

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "ErrorModel": 406

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "ErrorModel": 408

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "ErrorModel": 409

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "ErrorModel": 429

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "ErrorModel": 500

"PUT /openbanking-test/v1/payment-requests/{paymentRequestResourceId}" ..> "ErrorModel": 503

class "POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" <<Method>> {
  paymentRequestResourceId : string
  PSU-IP-Address : string {O}
  PSU-IP-Port : string {O}
  PSU-HTTP-Method : string {O}
  PSU-Date : string {O}
  PSU-GEO-Location : string {O}
  PSU-User-Agent : string {O}
  PSU-Referer : string {O}
  PSU-Accept : string {O}
  PSU-Accept-Charset : string {O}
  PSU-Accept-Encoding : string {O}
  PSU-Accept-Language : string {O}
  PSU-Device-ID : string {O}
  Digest : string {O}
  Signature : string {O}
  X-Request-ID : string {O}
}

"POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" ..> "HalPaymentRequest": 200

"POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" ..> "ErrorModel": 400

"POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" ..> "ErrorModel": 401

"POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" ..> "ErrorModel": 403

"POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" ..> "ErrorModel": 405

"POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" ..> "ErrorModel": 406

"POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" ..> "ErrorModel": 408

"POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" ..> "ErrorModel": 409

"POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" ..> "ErrorModel": 429

"POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" ..> "ErrorModel": 500

"POST /openbanking-test/v1/payment-requests/{paymentRequestResourceId}/confirmation" ..> "ErrorModel": 503

@enduml